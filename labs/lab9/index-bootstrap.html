<!DOCTYPE html>
<!-- saved from url=(0080)https://ilearn.csumb.edu/pluginfile.php/721164/mod_resource/content/0/index.html -->
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title> Lab 9: AJAX </title>
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <style>
        body {
            width: 90%;
            margin: 0px auto;
        }

        .error {
            color: red;
            /*display:none;*/
        }
    </style>
</head>

<body>

    <h1> Sign Up Form </h1>

    <form>
        <fieldset>
            <legend>Sign Up</legend>
            <form>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="inputEmail4">Email</label>
                        <input type="email" class="form-control" id="inputEmail4" placeholder="Email">
                    </div>
                    <div class="form-group col-md-6">
                        <label for="inputPassword4">Password</label>
                        <input type="password" class="form-control" id="inputPassword4" placeholder="Password">
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputAddress">Address</label>
                    <input type="text" class="form-control" id="inputAddress" placeholder="1234 Main St">
                </div>
                <div class="form-group">
                    <label for="inputAddress2">Address 2</label>
                    <input type="text" class="form-control" id="inputAddress2" placeholder="Apartment, studio, or floor">
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="inputCity">City</label>
                        <input type="text" class="form-control" id="inputCity">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="inputState">State</label>
                        <select id="inputState" class="form-control">
        <option selected>Choose...</option>
        <option>...</option>
      </select>
                    </div>
                    <div class="form-group col-md-2">
                        <label for="inputZip">Zip</label>
                        <input type="text" class="form-control" id="inputZip">
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-check">
                        <label class="form-check-label">
        <input class="form-check-input" type="checkbox"> Check me out
      </label>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Sign in</button>
            </form>

            <!--First Name: <input type="text"><br> -->
            <!--Last Name: <input type="text"><br> -->
            <!--Email: <input type="text"><br> -->
            <!--Phone Number:<input type="text"><br>-->
            <!--<br> -->
            <!--Zip Code: <input type="text" id="zip"><span class="error" id="noZip"></span><br> -->
            <!--City: <span id="city"></span><br> -->
            <!--Latitude: <span id="lat"></span><br> -->
            <!--Longitude: <span id="lon"></span><br>-->
            <!--<br> -->
            <!--State: <select id="state">-->
            <!--            <option value="">- Select -</option>-->
            <!--            <option value="ak">Alaska</option>-->
            <!--            <option value="ca">California</option>-->
            <!--            <option value="hi">Hawaii</option>-->
            <!--            <option value="ny">New York</option>-->
            <!--            <option value="or">Oregon</option>-->
            <!--        </select><br> -->
            <!--Select a County: <select id="county"></select><br> -->
            <!--Desired Username: <input type="text"><br> -->
            <!--Password: <input type="password" id="pw"><br> -->
            <!--Type Password Again: <input type="password" id="retype"><span class="error" id="noRetype"></span><br>-->
            <!--<input type="submit" value="Sign up!">-->
        </fieldset>
    </form>



    <script>
        $('#zip').change(function() { getCity() });
        $('#state').change(function() { getCounties() });

        $('#retype').change(function() { checkRetype() });

        function getCity() {
            // alert($('#zip').val());
            // console.log($('#zip').val());

            if ($('#zip').val() !== "") {
                $.ajax({

                    type: "GET",
                    url: "http://itcdland.csumb.edu/~milara/ajax/cityInfoByZip.php",
                    dataType: "json",
                    data: { "zip": $('#zip').val() },

                    success: function(data, status) {

                        if (data == false) {
                            // console.log('not a zip');
                            $('#noZip').html(' Zip code not found');
                            $('#city').html('');
                            $('#lat').html('');
                            $('#lon').html('');
                        }
                        else {
                            $('#noZip').html('');
                            $('#city').html(data.city);
                            $('#lat').html(data.latitude);
                            $('#lon').html(data.longitude);
                        }

                    },

                    complete: function(data, status) { //optional, used for debugging purposes
                        //alert(status);
                    }

                }); //ajax
            }
            else {
                $('#noZip').html(' Please input zipcode');
            }

        } // getCity()
        function getCounties() {
            // alert($('#state').val());
            console.log($('#state').val());

            $.ajax({

                type: "GET",
                url: "http://itcdland.csumb.edu/~milara/ajax/countyList.php",
                dataType: "json",
                data: { "state": $('#state').val() },

                success: function(data, status) {

                    // console.log(data[1].county);
                    // console.log(data.length);

                    $('#county').empty();

                    for (var i = 0; i < data.length; i++) {
                        // console.log(i + " " + data[i].county);
                        $('#county').append('<option>' + data[i].county + '</option>')
                    }

                },

                complete: function(data, status) { //optional, used for debugging purposes
                    //alert(status);
                }

            }); //ajax
        } // getCity()

        function checkRetype() {
            if ($('#retype').val() !== $('#pw').val()) {
                $('#noRetype').html(' Password does not match');
            }
            else {
                $('#noRetype').html('');
            }
        } // checkRetype()
    </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</body>

</html>
